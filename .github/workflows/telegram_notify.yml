name: Telegram notify on push

on:
  push:
    branches:
      - main

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send message to Telegram
        run: |
          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_MONITOR_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d parse_mode="HTML" \
            -d disable_web_page_preview="true" \
            -d text="ğŸ‘¤ User <a href='https://github.com/${{ github.actor }}'>${{ github.actor }}</a> committed into ğŸ“ <b>${{ github.repository }}</b>
          
          <b>Commit header:</b> ${{ github.event.head_commit.message }}
          
          ğŸ”— <a href='https://github.com/${{ github.repository }}'>Link to repository</a>
          ğŸ”— <a href='${{ github.event.head_commit.url }}'>Link to commit</a>
          ğŸ”— <a href='https://github.com/${{ github.actor }}'>Link to user profile</a>

          #log"